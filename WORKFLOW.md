# F1 Data Collection Workflow (2026+)

æœ¬æ–‡æ¡£å®šä¹‰é‡‡é›†ç«¯çš„è¿ç»´æµç¨‹ä¸æ ¸å¿ƒè®¾è®¡åŸåˆ™ã€‚

---

## ğŸ—ï¸ æ¶æ„åŸåˆ™

### 1. æ•°æ®ä¸ä»£ç åˆ†ç¦»
- **é‡‡é›†ç‹¬ç«‹**ï¼š`f1-collector` åªè´Ÿè´£é‡‡é›†å’Œç”Ÿæˆæ•°æ®æ–‡ä»¶ï¼ˆJSON / DBï¼‰
- **å±•ç¤ºç‹¬ç«‹**ï¼š`f1-website` åªè´Ÿè´£å±•ç¤ºï¼Œä¸åŒ…å«é‡‡é›†é€»è¾‘
- **åŒæ­¥æ¡¥æ¥**ï¼š`syncer.py` è´Ÿè´£å°†æ•°æ®ä»é‡‡é›†ç«¯å¤åˆ¶åˆ°å±•ç¤ºç«¯

### 2. æ··åˆå­˜å‚¨ç­–ç•¥
| æ•°æ®ç±»å‹ | æ ¼å¼ | ä½ç½®ï¼ˆå±•ç¤ºç«¯ï¼‰ | æ›´æ–°æ–¹å¼ |
|---------|------|----------------|---------|
| èµ›å† / è½¦æ‰‹ / è½¦é˜Ÿ | JSON | `data/*.json` | çƒ­æ›´æ–°ï¼ˆç›´æ¥æ›¿æ¢æ–‡ä»¶ï¼‰ |
| å†å²æ¯”èµ›ç»“æœ | SQLite | `f1.db` | çƒ­æ›´æ–°ï¼ˆç›´æ¥æ›¿æ¢æ–‡ä»¶ï¼‰ |

### 3. çƒ­æ›´æ–°åŸåˆ™
- å±•ç¤ºç«¯æ‰€æœ‰åŠ¨æ€æ•°æ®åœ¨**è¿è¡Œæ—¶** `fetch()` åŠ è½½ï¼Œä¸æ‰“åŒ…è¿› JS
- æ›´æ–°æ•°æ®åªéœ€æ›¿æ¢æ–‡ä»¶ï¼Œ**æ— éœ€é‡æ–°æ„å»ºå‰ç«¯**
- å‰ç«¯ä»£ç å˜æ›´æ‰éœ€è¦ `npm run build`

---

## ğŸ”„ åŒæ­¥å·¥å…·ï¼š`syncer.py`

ç»Ÿä¸€çš„æ•°æ®åŒæ­¥è„šæœ¬ï¼Œ**è‡ªåŠ¨æ£€æµ‹ç¯å¢ƒ**ï¼š

| ç¯å¢ƒ | æ£€æµ‹æ–¹å¼ | JSON ç›®æ ‡ | DB ç›®æ ‡ |
|------|---------|-----------|---------|
| æœ¬åœ°å¼€å‘ | `../f1-website/package.json` å­˜åœ¨ | `public/data/` | `public/` |
| NAS éƒ¨ç½² | `package.json` ä¸å­˜åœ¨ | `data/` | æ ¹ç›®å½• |

```bash
python syncer.py               # åŒæ­¥æ‰€æœ‰ JSON
python syncer.py --schedule    # ä»…åŒæ­¥èµ›ç¨‹
python syncer.py --db          # åŒæ­¥ f1.db
python syncer.py --all         # JSON + DB å…¨éƒ¨åŒæ­¥
python syncer.py --scrape      # å…ˆè¿è¡Œ scraper.py å†åŒæ­¥
```

---

## ğŸ“… èµ›å‰ä»»åŠ¡ (Pre-Race / Setup)

*ç›®æ ‡ï¼šè·å–èµ›å†ã€è¡¥å…¨æ•°æ®ã€åŒæ­¥åˆ°å±•ç¤ºç«¯ã€‚*

1. **é‡‡é›†ä¸å¢å¼ºæ•°æ®**ï¼š
   ```bash
   python scraper.py                          # é‡‡é›†åŸå§‹ RSC æ•°æ®
   python research/final_refine_2026.py       # è¡¥å…¨ gmtOffsetã€èµ›é“å›¾ã€å¤´åƒ
   ```
2. **ç”Ÿæˆè½¦æ‰‹/è½¦é˜Ÿæ•°æ®**ï¼š
   ```bash
   python scraper_drivers_2026.py             # ç”Ÿæˆ drivers_2026.json
   python scraper_teams_2026.py               # ç”Ÿæˆ teams_2026.json
   ```
3. **åŒæ­¥åˆ°å±•ç¤ºç«¯**ï¼š
   ```bash
   python syncer.py                           # åŒæ­¥æ‰€æœ‰ JSON
   ```

---

## ğŸ èµ›ä¸­/èµ›åä»»åŠ¡ (Post-Race)

*ç›®æ ‡ï¼šè·å–æ¯”èµ›æˆç»©å¹¶æ›´æ–°æ•°æ®ã€‚*

1. **è·å–æœ€æ–°æˆç»©**ï¼š
   ```bash
   python scraper_results_2026.py             # é‡‡é›†èµ›åæˆç»©ï¼ˆå¾…å®ç°ï¼‰
   ```
2. **å…¥åº“ä¸åŒæ­¥**ï¼š
   ```bash
   python syncer.py --all                     # åŒæ­¥ JSON + DB
   ```

---

## ğŸ–¥ï¸ NAS éƒ¨ç½²æ¶æ„

```
NAS (web/)
â”œâ”€â”€ f1-collector/              â† Docker git pull æ›´æ–°
â”‚   â”œâ”€â”€ syncer.py              â† æ•°æ®åŒæ­¥
â”‚   â”œâ”€â”€ scraper.py             â† æ•°æ®é‡‡é›†
â”‚   â”œâ”€â”€ schedule_2026.json     â† é‡‡é›†äº§ç‰©
â”‚   â”œâ”€â”€ drivers_2026.json
â”‚   â””â”€â”€ teams_2026.json
â””â”€â”€ f1-website/                â† Web Station é™æ€æœåŠ¡
    â”œâ”€â”€ index.html
    â”œâ”€â”€ f1.db                  â† å†å²æ•°æ®åº“ï¼ˆå¯çƒ­æ›´æ–°ï¼‰
    â”œâ”€â”€ sql-wasm.wasm
    â”œâ”€â”€ data/                  â† JSON æ•°æ®ï¼ˆå¯çƒ­æ›´æ–°ï¼‰
    â”‚   â”œâ”€â”€ schedule_2026.json
    â”‚   â”œâ”€â”€ drivers_2026.json
    â”‚   â””â”€â”€ teams_2026.json
    â””â”€â”€ assets/                â† JS/CSS æ„å»ºäº§ç‰©
```

### æ›´æ–°æµç¨‹

```
Docker å®šæ—¶ä»»åŠ¡
  â”œâ”€â”€ cd f1-collector && git pull        # æ‹‰å–æœ€æ–°ä»£ç å’Œæ•°æ®
  â”œâ”€â”€ python scraper.py                  # é‡‡é›†æ–°æ•°æ®ï¼ˆå¯é€‰ï¼‰
  â””â”€â”€ python syncer.py --all             # åŒæ­¥åˆ°å±•ç¤ºç«¯
                                         # â†’ data/*.json çƒ­æ›´æ–°
                                         # â†’ f1.db çƒ­æ›´æ–°
                                         # â†’ æ— éœ€ npm run build
```

### ä½•æ—¶éœ€è¦é‡æ–°æ„å»ºå‰ç«¯ï¼Ÿ

| åœºæ™¯ | æ“ä½œ |
|------|------|
| JSON æ•°æ®æ›´æ–° | `python syncer.py` â†’ **ä¸éœ€è¦** rebuild |
| f1.db æ›´æ–° | `python syncer.py --db` â†’ **ä¸éœ€è¦** rebuild |
| å‰ç«¯ä»£ç å˜æ›´ï¼ˆç»„ä»¶/æ ·å¼ï¼‰ | æœ¬åœ° `npm run build` â†’ éƒ¨ç½² `dist/` åˆ° NAS |

---

## ğŸ› ï¸ èµ„äº§å±•ç¤ºæ ‡å‡† (Frontend Rules)

- **å›½æ——**: `w-14 h-14 rounded-full object-cover` åœ†å½¢å±•ç¤º
- **èµ›é“å›¾**: æš—è‰²æ¨¡å¼ `dark:invert dark:brightness-150 dark:contrast-125`
- **è½¦æ‰‹è‚–åƒ**: `scale-[1.4] origin-top object-top`

---

## ğŸš€ ç´§æ€¥æ¢å¤æµç¨‹

```bash
# 1. é‡æ–°é‡‡é›†
python scraper.py

# 2. åŒæ­¥å…¨éƒ¨æ•°æ®
python syncer.py --all

# 3. å¦‚éœ€é‡å»ºå‰ç«¯ï¼ˆæœ¬åœ°æ‰§è¡Œï¼‰
cd ../f1-website && npm run build
# å°† dist/ å†…å®¹éƒ¨ç½²åˆ° NAS f1-website/
```
